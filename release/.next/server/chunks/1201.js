"use strict";exports.id=1201,exports.ids=[1201],exports.modules={1201:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.d(t,{Z:()=>CustomCalendar});var l=o(997),r=o(6689),d=o(2245),i=o.n(d),a=o(6295),s=o(4451),c=o(3504),p=e([c]);function CustomCalendar({schedules:e,currentMonth:t,setCurrentMonth:o,onSelectSchedule:n,shouldFilterInactive:d=!0,mode:p="user"}){let[f,u]=(0,r.useState)(null),[x,h]=(0,r.useState)([]),[y,m]=(0,r.useState)(null),handleEdit=e=>{window.location.href=`/admin/schedules/${e.id}`},handleDelete=async e=>{if(window.confirm("정말 삭제하시겠습니까?"))try{await c.ZP.delete(`admin/schedules/${e.id}`),alert("삭제되었습니다."),m(null),window.location.reload()}catch(e){console.error("삭제 실패:",e),alert("삭제 실패")}},b=(0,r.useMemo)(()=>{let e=[],o=t.clone().startOf("month").startOf("week"),n=t.clone().endOf("month").endOf("week"),l=o.clone();for(;l.isSameOrBefore(n,"day");){let t=[];for(let e=0;e<7;e++)t.push(l.clone()),l.add(1,"day");e.push(t)}return e},[t]),getColorById=e=>{let t=["#3b82f6","#10b981","#f59e0b","#a855f7","#6366f1","#ec4899","#22d3ee","#ef4444","#8b5cf6","#06b6d4","#eab308","#16a34a","#4ade80","#f43f5e"],o="number"==typeof e?e:e.toString().split("").reduce((e,t)=>e+t.charCodeAt(0),0);return t[o%t.length]},handleMoreClick=(e,t)=>{u(e),h(t)},g=(0,r.useMemo)(()=>{let t=d?e.filter(e=>e.is_active):e;return t.map(e=>({...e,type:e.type||e.category||null,start:i()(e.start),end:i()(e.end)}))},[e,d]),w=(0,r.useMemo)(()=>{let e={};return g.forEach(t=>{let o=i()(t.start).startOf("day"),n=i()(t.end).startOf("day"),l=n.diff(o,"days")+1;for(let n=0;n<l;n++){let l=o.clone().add(n,"days").format("YYYY-MM-DD");e[l]||(e[l]=[]),e[l].push(t)}}),e},[g]);return(0,r.useMemo)(()=>b.map(e=>{let t=[],o=g.filter(t=>t.end.isSameOrAfter(e[0],"day")&&t.start.isSameOrBefore(e[6],"day"));return o.forEach(o=>{let n=o.start,l=o.end,r=-1!==e.findIndex(e=>e.isSame(n,"day"))?e.findIndex(e=>e.isSame(n,"day")):e.findIndex(e=>e.isSameOrAfter(n)),d=-1!==e.findIndex(e=>e.isSame(l,"day"))?e.findIndex(e=>e.isSame(l,"day")):e.findIndex(e=>e.isSameOrBefore(l)),i=!1;for(let e=0;e<t.length;e++){let n=t[e],l=n.some(e=>!(e.end<r||e.start>d));if(!l){n.push({...o,start:r,end:d}),i=!0;break}}i||t.push([{...o,start:r,end:d}])}),t}),[g,t]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[l.jsx("thead",{children:l.jsx("tr",{children:["일","월","화","수","목","금","토"].map((e,t)=>l.jsx("th",{style:{textAlign:"center",padding:"8px",borderBottom:"1px solid #ddd",color:0===t||6===t?"#ef4444":"#111"},children:e},e))})}),l.jsx("tbody",{children:b.map((e,o)=>l.jsx("tr",{children:e.map((e,o)=>{let r=e.format("YYYY-MM-DD"),d=e.isSame(i()(),"day"),a=e.month()===t.month(),s=w[r]||[];return(0,l.jsxs)("td",{style:{verticalAlign:"top",padding:"6px",border:"1px solid #eee",height:"120px",backgroundColor:d?"#fff":a?"#fff":"#d1d5db",color:d?"#ef4444":a?0===o||6===o?"#dc2626":"#999":"#c0c0c0",fontWeight:d?"bold":"normal",position:"relative"},children:[l.jsx("div",{style:{fontSize:"13px",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",margin:"0 auto",marginBottom:"8px",borderRadius:"50%",backgroundColor:d?"#3b82f6":"transparent",color:d?"#fff":void 0,fontWeight:d?"bold":"normal"},children:e.date()}),s.slice(0,3).map((e,t)=>{let o=getColorById(e.id);return l.jsx("div",{onClick:()=>n?n(e):m(e),style:{background:o,color:"white",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",transition:"all 0.2s ease",opacity:1},onMouseEnter:e=>e.currentTarget.style.opacity=.85,onMouseLeave:e=>e.currentTarget.style.opacity=1,children:e.title},t)}),s.length>3&&(0,l.jsxs)("div",{onClick:()=>handleMoreClick(r,s),style:{fontSize:"11px",color:"#2563eb",cursor:"pointer"},children:["+",s.length-3," more"]})]},r)})},`week-${o}`))})]}),f&&l.jsx(a.Z,{open:!!f,date:f,events:x,onClose:()=>u(null)}),y&&l.jsx(s.Z,{schedule:y,onClose:()=>m(null),onEdit:()=>handleEdit(y),onDelete:()=>handleDelete(y),mode:p})]})}c=(p.then?(await p)():p)[0],n()}catch(e){n(e)}})},4451:(e,t,o)=>{o.d(t,{Z:()=>ScheduleDetailModal});var n=o(997),l=o(6689),r=o(2245),d=o.n(r);function ScheduleDetailModal({schedule:e,onClose:t,onEdit:o,onDelete:r,mode:i="user"}){var a;if(!e)return null;console.log("\uD83D\uDCCC ScheduleDetailModal schedule:",e),console.log("\uD83D\uDCCC schedule.type:",e?.type),(0,l.useEffect)(()=>{let handleEsc=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",handleEsc),()=>window.removeEventListener("keydown",handleEsc)},[t]);let formatDateTime=e=>d()(e).format("YYYY.MM.DD A h:mm");return n.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.4)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"#fff",borderRadius:"12px",padding:"32px",width:"460px",maxWidth:"90%",boxShadow:"0 10px 30px rgba(0,0,0,0.25)",position:"relative"},children:[n.jsx("button",{onClick:t,style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#999"},children:"✕"}),n.jsx("h2",{style:{marginBottom:"20px",fontSize:"22px",fontWeight:"bold",color:"#111",textAlign:"center"},children:e.title}),(0,n.jsxs)("div",{style:{fontSize:"15px",display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:["admin"===i&&n.jsx(InfoRow,{label:"상품명",value:e.product_title||"-"}),n.jsx(InfoRow,{label:"장소",value:e.location||"-"}),n.jsx(InfoRow,{label:"강사",value:e.instructor||"-"}),n.jsx(InfoRow,{label:"정원",value:e.total_spots??"-"}),n.jsx(InfoRow,{label:"기간",value:`${formatDateTime(e.start)} ~ ${formatDateTime(e.end)}`}),"admin"===i&&n.jsx(InfoRow,{label:"가격",value:"number"==typeof(a=e.price)?a.toLocaleString()+"원":"-"}),n.jsx(InfoRow,{label:"설명",value:e.description||"-"})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:["admin"===i&&r&&n.jsx("button",{onClick:r,style:{padding:"6px 12px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"삭제"}),"admin"===i&&o&&n.jsx("button",{onClick:o,style:{padding:"6px 12px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"수정"}),"user"===i&&n.jsx("button",{onClick:()=>{e?.type?window.open(`/education/${e.type}/${e.id}`,"_blank"):window.open(`/education/calendar/${e.id}`,"_blank")},style:{padding:"6px 12px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"상세 보기"})]})]})})}let InfoRow=({label:e,value:t})=>(0,n.jsxs)("div",{style:{display:"flex"},children:[n.jsx("div",{style:{width:"80px",fontWeight:"bold",color:"#555"},children:e}),n.jsx("div",{style:{flex:1,color:"#333"},children:t})]})},6295:(e,t,o)=>{o.d(t,{Z:()=>ScheduleListModal});var n=o(997),l=o(6689),r=o(2245),d=o.n(r);function ScheduleListModal({open:e,onClose:t,date:o,events:r}){return((0,l.useEffect)(()=>{let handleKeyDown=e=>{"Escape"===e.key&&t()};return e&&document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[e,t]),e)?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},children:(0,n.jsxs)("div",{style:{background:"#fff",padding:"24px",borderRadius:"8px",width:"360px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",position:"relative"},children:[n.jsx("button",{onClick:t,style:{position:"absolute",top:12,right:16,background:"none",border:"none",fontSize:28,fontWeight:"bold",color:"#666",cursor:"pointer"},children:"\xd7"}),(0,n.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"16px"},children:[d()(o).format("YYYY년 M월 D일")," 일정"]}),n.jsx("ul",{style:{maxHeight:"240px",overflowY:"auto",marginBottom:"16px"},children:r.map((e,t)=>(0,n.jsxs)("li",{onClick:()=>{e?.type?window.open(`/education/${e.type}/${e.id}`,"_blank"):window.open(`/education/calendar/${e.id}`,"_blank")},style:{marginBottom:"8px",fontSize:"14px",cursor:"pointer",color:"#2563eb"},children:["• ",e.title]},t))})]})}):null}}};