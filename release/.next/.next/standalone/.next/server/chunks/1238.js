"use strict";exports.id=1238,exports.ids=[1238],exports.modules={5427:(e,t,n)=>{n.d(t,{Z:()=>CartItemCard});var i=n(997),o=n(7104),r=n(1163);function CartItemCard({item:e,selected:t,onCheck:n,onDelete:d,onQuantityChange:c,disableActions:a=!1}){let p=(0,r.useRouter)(),{id:x,schedule_id:u,schedule_title:h,start_date:f,end_date:g,image_url:b,unit_price:y,discount_price:j,quantity:m,subtotal:S}=e,C=new Date(f),v=new Date(g),D=C.getFullYear()===v.getFullYear()&&C.getMonth()===v.getMonth()&&C.getDate()===v.getDate();return(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"12px",padding:"16px",background:"#fff",display:"flex",flexDirection:"row",gap:"16px",position:"relative",height:"100%",boxSizing:"border-box",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[!a&&i.jsx("button",{onClick:()=>d(x),style:{position:"absolute",top:6,right:6,background:"transparent",border:"none",fontSize:"20px",color:"#aaa",cursor:"pointer"},title:"삭제",children:"\xd7"}),!a&&i.jsx("input",{type:"checkbox",checked:t,onChange:e=>n(x,e.target.checked),style:{position:"absolute",top:12,left:12}}),i.jsx("div",{onClick:()=>p.push(`/education/facilitation/${u}`),style:{width:80,height:80,flexShrink:0,borderRadius:4,overflow:"hidden",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:b?i.jsx("img",{src:b,alt:h,style:{width:"100%",height:"100%",objectFit:"cover"}}):i.jsx("span",{style:{color:"#999",fontSize:12},children:"썸네일 없음"})}),(0,i.jsxs)("div",{style:{flex:1,paddingTop:4},children:[i.jsx("h3",{style:{fontSize:"15px",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:h}),(0,i.jsxs)("p",{style:{fontSize:"13px",color:"#666",marginBottom:"8px"},children:[C.toLocaleDateString(),!D&&` ~ ${v.toLocaleDateString()}`]}),a?(0,i.jsxs)("div",{style:{fontSize:14,marginTop:4},children:["수량: ",m]}):i.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:(0,i.jsxs)("div",{style:{display:"inline-flex",border:"1px solid #ccc",borderRadius:4,overflow:"hidden",alignItems:"center"},children:[i.jsx("button",{onClick:()=>c(e,-1),style:s,children:"–"}),i.jsx("div",{style:l,children:m}),i.jsx("button",{onClick:()=>c(e,1),style:s,children:"+"})]})}),i.jsx("div",{style:{marginTop:8,fontSize:"15px"},children:j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{style:{textDecoration:"line-through",color:"#999",marginRight:8},children:[(0,o.T)(y),"원"]}),(0,i.jsxs)("span",{style:{color:"#d9534f",fontWeight:"bold"},children:[(0,o.T)(j),"원"]}),(0,i.jsxs)("span",{style:{fontSize:"11px",marginLeft:6,color:"#d9534f",fontWeight:"bold"},children:["(",Math.round((1-j/y)*100),"% 할인)"]}),(0,i.jsxs)("div",{style:{textAlign:"right",fontWeight:"bold",marginTop:4},children:[(0,o.T)(S),"원"]})]}):i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{style:{textAlign:"right",fontWeight:"bold"},children:[(0,o.T)(S),"원"]})})})]})]})}let s={width:32,height:32,border:"1px solid #ddd",background:"#f5f5f5",fontWeight:"bold",fontSize:16,cursor:"pointer",borderRadius:"4px"},l={width:36,height:28,lineHeight:"28px",textAlign:"center",fontSize:14,background:"#fff"}},8097:(e,t,n)=>{n.d(t,{Z:()=>CartSummary});var i=n(997),o=n(6689),r=n(7104);function CouponSelector({couponList:e=[],onSelect:t,onClose:n}){return console.log("\uD83D\uDD25 CouponSelector 렌더됨:",e),i.jsx("div",{style:s,children:(0,i.jsxs)("div",{style:{...l,width:320},children:[(0,i.jsxs)("div",{style:d,children:[i.jsx("strong",{children:"쿠폰 선택"}),i.jsx("button",{onClick:n,style:c,children:"\xd7"})]}),(0,i.jsxs)("ul",{style:{padding:0,listStyle:"none",marginTop:12},children:[i.jsx("li",{tabIndex:0,role:"button",onClick:()=>{console.log("\uD83D\uDD25 쿠폰 선택: 없음"),t(null),n()},style:a,children:"선택 안 함"},0),e.map(o=>(0,i.jsxs)("li",{tabIndex:0,role:"button",onClick:()=>{let i=e.find(e=>e.id===o.id);console.log("\uD83D\uDD25 쿠폰 클릭됨:",i),i||console.warn("❗ 쿠폰 매칭 실패, 원본:",o),t(i),n()},style:a,children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:o.label||o.name||`쿠폰 #${o.id}`}),i.jsx("span",{style:{color:"#3b82f6",fontWeight:"bold",fontSize:"13px"},children:(0,r.T)(o.amount||0)})]}),o.expiry_date&&(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:4},children:["유효기한: ",new Date(o.expiry_date).toLocaleDateString()]})]},o.id))]})]})})}let s={position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},l={background:"#fff",padding:20,borderRadius:8,width:280,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},d={display:"flex",justifyContent:"space-between",alignItems:"center"},c={fontSize:18,border:"none",background:"transparent",cursor:"pointer"},a={padding:"10px 12px",borderBottom:"1px solid #eee",cursor:"pointer",fontSize:"14px"};function PointInputModal({onApply:e,onClose:t,maxPoint:n=0,defaultValue:r=0}){let[s,l]=(0,o.useState)(r);return(0,o.useEffect)(()=>{l(r)},[r]),i.jsx("div",{style:p,children:(0,i.jsxs)("div",{style:x,children:[(0,i.jsxs)("div",{style:u,children:[i.jsx("strong",{children:"포인트 사용"}),i.jsx("button",{onClick:t,style:h,children:"\xd7"})]}),(0,i.jsxs)("div",{style:{marginTop:16},children:[i.jsx("input",{type:"number",min:0,max:n,value:s,onChange:e=>l(e.target.value),placeholder:"0",style:f}),(0,i.jsxs)("div",{style:b,children:[(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#999"},children:["사용 가능 포인트: ",n.toLocaleString(),"P"]}),i.jsx("button",{onClick:()=>{l(n)},style:{fontSize:"12px",border:"none",background:"transparent",color:"#3b82f6",cursor:"pointer"},children:"전액사용"})]})]}),i.jsx("button",{onClick:()=>{let i=Math.min(Number(s),n);e(i),t()},style:g,children:"적용"})]})})}let p={position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},x={background:"#fff",padding:20,borderRadius:8,width:280,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},u={display:"flex",justifyContent:"space-between",alignItems:"center"},h={fontSize:18,border:"none",background:"transparent",cursor:"pointer"},f={padding:10,width:"100%",fontSize:"14px",border:"1px solid #ccc",borderRadius:4},g={marginTop:16,padding:"10px 0",width:"100%",fontWeight:"bold",fontSize:"14px",backgroundColor:"#3b82f6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},b={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:6};function CartSummary({items:e=[],couponDiscount:t=0,pointUsed:n=0,onCheckout:s,onCouponChange:l,onPointChange:d,maxPoint:c=0,couponList:a=[],isLoading:p=!1}){console.log("\uD83D\uDCE6 CartSummary → items 확인:",e);let[x,u]=(0,o.useState)(!1),[h,f]=(0,o.useState)(!1),g=e.reduce((e,t)=>(console.log("\uD83D\uDD22 item.quantity:",t.quantity),e+t.quantity),0),b=e.reduce((e,t)=>e+t.unit_price*t.quantity,0),S=e.reduce((e,t)=>{let n=null!==t.discount_price&&void 0!==t.discount_price&&t.discount_price>0&&t.discount_price<t.unit_price,i=n?(t.unit_price-t.discount_price)*t.quantity:0;return e+i},0),C=0===g||"number"!=typeof t?0:t,v=0===g?0:n,D=isNaN(C)?0:C;console.log("\uD83D\uDCB8 전달받은 couponDiscount:",t),console.log("\uD83D\uDCB8 safeCoupon 계산 결과:",D);let k=Math.max(0,b-S-C-v);return(0,i.jsxs)("div",{style:{background:"#f9f9f9",border:"1px solid #ddd",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",height:"fit-content"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:12},children:"주문정보"}),(0,i.jsxs)("div",{style:y,children:[i.jsx("span",{style:j,children:"수량:"}),(0,i.jsxs)("span",{children:[g,"개"]})]}),(0,i.jsxs)("div",{style:y,children:[i.jsx("span",{style:j,children:"금액:"}),(0,i.jsxs)("span",{children:[(0,r.T)(b),"원"]})]}),a&&a.length>0&&(0,i.jsxs)("div",{style:{...y,color:"#d9534f"},children:[i.jsx("span",{style:j,children:"쿠폰:"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx("span",{children:g>0&&D>0?`− ${(0,r.T)(D)}원`:"선택된 항목 없음"}),i.jsx("button",{onClick:()=>u(!0),style:m,disabled:0===g,children:"사용"})]})]}),!isNaN(c)&&Number(c)>0&&(0,i.jsxs)("div",{style:{...y,color:"#d9534f"},children:[i.jsx("span",{style:j,children:"포인트:"}),(0,i.jsxs)("span",{children:[g>0&&v>0?`− ${(0,r.T)(v)}원`:"선택된 항목 없음",i.jsx("button",{onClick:()=>f(!0),style:m,disabled:0===g,children:"사용"})]})]}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",marginTop:8,borderTop:"1px dashed #ccc",paddingTop:8,display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"결제 금액"}),(0,i.jsxs)("span",{children:[(0,r.T)(k),"원"]})]}),i.jsx("button",{onClick:s,disabled:0===g||p,style:{marginTop:"16px",width:"100%",padding:"10px 0",fontWeight:"bold",backgroundColor:0===g||p?"#ccc":"#3b82f6",color:"#fff",border:"none",borderRadius:"6px",cursor:0===g||p?"not-allowed":"pointer",fontSize:"15px",opacity:p?.6:1},children:p?"처리 중...":"주문하기"}),x&&i.jsx(CouponSelector,{couponList:a,onSelect:e=>{l(e)},onClose:()=>u(!1)}),h&&i.jsx(PointInputModal,{maxPoint:c,defaultValue:n,onApply:e=>d(e),onClose:()=>f(!1)})]})}let y={fontSize:"14px",marginBottom:4,display:"flex",justifyContent:"space-between",alignItems:"center"},j={minWidth:"90px",fontWeight:"normal"},m={fontSize:"12px",marginLeft:8,padding:"2px 6px",borderRadius:"4px",border:"1px solid #ccc",background:"#fff",cursor:"pointer"}}};