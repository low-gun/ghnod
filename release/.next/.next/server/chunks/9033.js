"use strict";exports.id=9033,exports.ids=[9033],exports.modules={9033:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{Z:()=>TiptapEditor});var n=i(997),r=i(6689),o=i(3348),a=i(8910),s=i(140),d=i(5146),u=i(7297),c=i(2782),p=i(7436),h=i(7688),f=i(7828),g=i(7641),x=i(2719),m=i(3567),y=i(9553),b=i(5473),v=i(7339),j=i(3775),C=i(5767),w=i(7720),k=i(2375),M=i(9038),T=e([o,a,s,d,u,c,p,h,f,g,x,m,y,b,v,j,w,k,M]);function TiptapEditor({value:e,onChange:t,height:i=280}){let[l,T]=(0,r.useState)(!1),[L,E]=(0,r.useState)(!1),H=(0,r.useRef)(null);(0,r.useEffect)(()=>{E(!0)},[]);let D=(0,o.useEditor)({extensions:[a.default.configure({blockquote:!1,bulletList:!1,orderedList:!1,listItem:!1}),s.default.configure({openOnClick:!1}),d.default.configure({resizable:!0,allowTableNodeSelection:!1}),u.default,p.x,c.Y,h.default,f.default,x.default,m.default,g.default.configure({types:["heading","paragraph"]}),y.B,b.b,v.x,w.default,k.default,M.default],content:e?.trim()||"<p><br></p><p><br></p><p><br></p>",editorProps:{attributes:{class:"tiptap-editor"}},onUpdate:({editor:e})=>{t(e.getHTML())},editable:L,immediatelyRender:!1});(0,r.useEffect)(()=>{D&&e!==D.getHTML()&&D.commands.setContent(e||"")},[e,D]);let insertImage=e=>{let i=new FileReader;i.onload=()=>{D.commands.insertContent(`<img src="${i.result}" alt="image" />`),t(D.getHTML())},i.readAsDataURL(e)};return L&&D?(0,n.jsxs)("div",{children:[n.jsx("style",{children:`
          .tiptap-editor ul {
            padding-left: 1.2rem;
            list-style-type: disc;
          }
          .tiptap-editor *:first-child {
            margin-top: 0;
          }
          .tiptap-editor img,
          .preview-wrapper img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0.5rem 0;
          }
          .tiptap-editor,
          .preview-wrapper {
            word-break: break-word;
            min-height: 280px;
          }
          .tiptap-editor table {
            border-collapse: separate;
            border-spacing: 0;
            table-layout: fixed;
            width: auto;
            max-width: 100%;
            transition: outline 0.2s ease-in-out;
          }
          .tiptap-editor table:hover {
            outline: 1px dashed #aaa;
            outline-offset: 2px;
          }
          .tiptap-editor td,
          .tiptap-editor th {
            border: 1px solid #ccc;
            box-sizing: border-box;
            position: relative;
            vertical-align: top;
            min-height: 30px;
          }
          .tiptap-editor th {
            font-weight: normal;
          }
          .tiptap-editor .selectedCell {
            background-color: rgba(0, 112, 243, 0.1);
          }

          /* 👉 가로 드래그 커서 영역 (우측 border 선 위에서만) */
          .tiptap-editor td::after,
          .tiptap-editor th::after {
            content: '';
            position: absolute;
            right: -2px;
            top: 0;
            width: 4px;
            height: 100%;
            cursor: col-resize;
            z-index: 10;
          }

          .tiptap-editor td:hover::after,
          .tiptap-editor th:hover::after {
            background-color: #eee;
          }
        `}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start",marginBottom:12},children:[!l&&n.jsx(j.Z,{editor:D,fileInputRef:H}),n.jsx(C.Z,{sourceMode:l,setSourceMode:T})]}),l?n.jsx("textarea",{value:e,onChange:e=>t(e.target.value),style:{width:"100%",minHeight:i,border:"1px solid #ddd",borderRadius:6,padding:12,fontFamily:"monospace"}}):n.jsx("div",{style:{position:"relative",border:"1px solid #ddd",borderRadius:6,padding:12,minHeight:i,height:"100%",background:"#fff"},children:n.jsx(o.EditorContent,{editor:D,spellCheck:!1,style:{width:"100%",minHeight:"100%"}})}),n.jsx("input",{type:"file",accept:"image/*",ref:H,style:{display:"none"},onChange:e=>{let t=e.target.files[0];t&&D&&insertImage(t)}})]}):null}[o,a,s,d,u,c,p,h,f,g,x,m,y,b,v,j,w,k,M]=T.then?(await T)():T,l()}catch(e){l(e)}})},5767:(e,t,i)=>{i.d(t,{Z:()=>EditorModeButtons});var l=i(997);function EditorModeButtons({sourceMode:e,setSourceMode:t}){return l.jsx("div",{style:{display:"flex",gap:8},children:e?l.jsx("button",{onClick:()=>t(!1),style:n,children:"\uD83D\uDCDD 편집"}):l.jsx("button",{onClick:()=>t(!0),style:n,children:"\uD83E\uDDFE HTML"})})}let n={padding:"6px 10px",fontSize:"13px",border:"1px solid #ccc",borderRadius:4,backgroundColor:"#f4f4f4",cursor:"pointer"}},3775:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{Z:()=>ToolbarButtons});var n=i(997),r=i(6689),o=i(7629),a=e([o]);function ToolbarButtons({editor:e,fileInputRef:t,fontSizes:i=["12px","14px","16px","18px","20px","24px"]}){let[l,a]=(0,r.useState)("#000000"),[s,d]=(0,r.useState)("1px"),[u,c]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[x,m]=(0,r.useState)(0),[y,b]=(0,r.useState)(0),[v,j]=(0,r.useState)("#ffffff"),C={padding:"6px 10px",fontSize:"13px",border:"1px solid #ccc",borderRadius:4,backgroundColor:"#f4f4f4",cursor:"pointer"};return(0,r.useEffect)(()=>{let checkTableSelection=()=>{let t=e?.state.selection;if(t instanceof o.CellSelection){let i=e.view.domAtPos(t.$anchorCell.pos)?.node;if(i instanceof HTMLElement){let e=i.getBoundingClientRect();h({top:e.top+window.scrollY-40,left:e.left+window.scrollX}),c(!0)}}else c(!1)};checkTableSelection();let t=setInterval(checkTableSelection,300);return()=>clearInterval(t)},[e]),setTimeout(()=>{},100),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginRight:"auto"},children:[n.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),style:C,children:n.jsx("b",{children:"B"})}),n.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),style:C,children:n.jsx("i",{children:"I"})}),n.jsx("button",{onClick:()=>e.chain().focus().toggleUnderline().run(),style:C,children:n.jsx("u",{children:"U"})}),n.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),style:C,children:"리스트"}),n.jsx("button",{onClick:()=>{let t=e.getAttributes("link").href,i=window.prompt("링크 URL을 입력하세요:",t);if(null!==i){if(""===i)e.chain().focus().unsetLink().run();else{if(e.state.selection.empty){alert("링크를 적용할 텍스트를 먼저 선택하세요.");return}e.chain().focus().extendMarkRange("link").setLink({href:i}).run()}}},style:C,children:"\uD83D\uDD17 링크"}),n.jsx("button",{onClick:()=>{let t=window.prompt("이미지 URL을 입력하세요:");t&&e.chain().focus().setImage({src:t}).run()},style:C,children:"이미지 URL"}),(0,n.jsxs)("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:()=>{g(e=>!e)},style:C,children:"▦ 테이블"}),f&&(0,n.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"1px solid #ccc",padding:8,marginTop:4,zIndex:100},children:[n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 20px)",gap:2},children:Array.from({length:100},(t,i)=>{let l=i%10+1,r=Math.floor(i/10)+1;return n.jsx("div",{onMouseEnter:()=>{m(l),b(r)},onClick:()=>{console.log("\uD83D\uDCE6 생성하려는 테이블 크기:",x,"x",y),e.chain().focus().insertTable({rows:y,cols:x,withHeaderRow:!1}).run(),g(!1)},style:{width:20,height:20,background:l<=x&&r<=y?"#0070f3":"#eee",cursor:"pointer"}},i)})}),(0,n.jsxs)("div",{style:{marginTop:6,fontSize:12},children:[x," x ",y]})]})]}),n.jsx("button",{onClick:()=>t.current?.click(),style:C,children:"\uD83D\uDCC1 파일"}),n.jsx("select",{onChange:t=>e.chain().focus().setFontSize(t.target.value).run(),defaultValue:"16px",style:C,children:i.map(e=>n.jsx("option",{value:e,children:e},e))}),(0,n.jsxs)("select",{onChange:t=>e.chain().focus().setFontFamily(t.target.value).run(),defaultValue:"",style:C,children:[n.jsx("option",{value:"",children:"기본폰트"}),n.jsx("option",{value:"Arial",children:"Arial"}),n.jsx("option",{value:"Georgia",children:"Georgia"}),n.jsx("option",{value:"Noto Sans KR",children:"Noto Sans KR"}),n.jsx("option",{value:"Courier New",children:"Courier New"})]}),n.jsx("input",{type:"color",onChange:t=>e.chain().focus().setColor(t.target.value).run(),title:"폰트 색상",style:{...C,padding:4,width:36}}),(0,n.jsxs)("select",{onChange:t=>{let i=t.target.value;e.chain().focus().setTextAlign(i).run()},defaultValue:"left",style:C,children:[n.jsx("option",{value:"left",children:"좌측정렬"}),n.jsx("option",{value:"center",children:"가운데정렬"}),n.jsx("option",{value:"right",children:"우측정렬"})]})]}),u&&p&&(0,n.jsxs)("div",{style:{position:"absolute",top:p.top,left:p.left,background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:4,display:"flex",gap:6,zIndex:100},children:[(0,n.jsxs)("select",{onChange:e=>d(e.target.value),defaultValue:s,style:C,children:[n.jsx("option",{value:"1px",children:"1px"}),n.jsx("option",{value:"2px",children:"2px"}),n.jsx("option",{value:"3px",children:"3px"})]}),n.jsx("input",{type:"color",value:l,onChange:e=>a(e.target.value),style:{width:36,height:30}}),n.jsx("button",{onClick:()=>{let{state:t,view:i}=e,n=t.tr,r=[];if(!(t.selection instanceof o.CellSelection)){alert("선택된 셀이 없습니다.");return}if(t.selection.forEachCell((e,t)=>{let l=i.nodeDOM(t);if(!l||"TD"!==l.tagName&&"TH"!==l.tagName){console.warn("❌ 정확한 셀 DOM 못 찾음",t,l);return}let n=l.cellIndex,o=l.parentElement?.rowIndex;"number"==typeof n&&"number"==typeof o&&r.push({node:e,pos:t,x:n,y:o})}),0===r.length){alert("적용할 셀이 없습니다.");return}let a=r.map(e=>e.x),d=r.map(e=>e.y),u=Math.min(...a),c=Math.max(...a),p=Math.min(...d),h=Math.max(...d);r.forEach(({node:e,pos:t,x:i,y:r})=>{let o=Object.fromEntries((e.attrs.style||"").split(";").map(e=>e.trim()).filter(Boolean).map(e=>e.split(":").map(e=>e.trim()))),a={...r===p&&{"border-top":`${s} solid ${l}`},...r===h&&{"border-bottom":`${s} solid ${l}`},...i===u&&{"border-left":`${s} solid ${l}`},...i===c&&{"border-right":`${s} solid ${l}`}},d={...o,...a},f=Object.entries(d).map(([e,t])=>`${e}: ${t}`).join("; ");n.setNodeMarkup(t,void 0,{...e.attrs,style:f})}),i.dispatch(n)},style:C,children:"테두리 적용"}),n.jsx("input",{type:"color",value:v,onChange:t=>{let i=t.target.value;j(i),e.commands.setCellAttribute("backgroundColor",i)},title:"배경색",style:{width:32,height:28,cursor:"pointer"}}),n.jsx("button",{onClick:()=>e.chain().focus().mergeCells().run(),style:C,children:"\uD83E\uDDE9 병합"}),n.jsx("button",{onClick:()=>e.chain().focus().addRowAfter().run(),style:C,children:"➕ 행"}),n.jsx("button",{onClick:()=>e.chain().focus().addColumnAfter().run(),style:C,children:"➕ 열"}),n.jsx("button",{onClick:()=>e.chain().focus().deleteRow().run(),style:C,children:"➖ 행"}),n.jsx("button",{onClick:()=>e.chain().focus().deleteColumn().run(),style:C,children:"➖ 열"})]})]})}o=(a.then?(await a)():a)[0],l()}catch(e){l(e)}})},5473:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{b:()=>o});var n=i(5234),r=e([n]);n=(r.then?(await r)():r)[0];let o=n.Mark.create({name:"fontFamily",addAttributes:()=>({family:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.family?{style:`font-family: ${e.family}`}:{}}}),parseHTML:()=>[{tag:"span",style:"font-family"}],renderHTML:({HTMLAttributes:e})=>["span",(0,n.mergeAttributes)(e),0],addCommands(){return{setFontFamily:e=>({commands:t})=>t.setMark(this.name,{family:e})}}});l()}catch(e){l(e)}})},9553:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{B:()=>o});var n=i(5234),r=e([n]);n=(r.then?(await r)():r)[0];let o=n.Mark.create({name:"fontSize",addAttributes:()=>({size:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.size?{style:`font-size: ${e.size}`}:{}}}),parseHTML:()=>[{tag:"span",style:"font-size"}],renderHTML:({HTMLAttributes:e})=>["span",(0,n.mergeAttributes)(e),0],addCommands(){return{setFontSize:e=>({commands:t})=>t.setMark(this.name,{size:e})}}});l()}catch(e){l(e)}})},7339:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{x:()=>o});var n=i(5234),r=e([n]);n=(r.then?(await r)():r)[0];let o=n.Node.create({name:"image",inline:!1,group:"block",draggable:!0,addAttributes:()=>({src:{},alt:{default:null},width:{default:"auto"},height:{default:"auto"}}),parseHTML:()=>[{tag:"img[src]"}],renderHTML:({HTMLAttributes:e})=>["img",(0,n.mergeAttributes)(e)],addCommands:()=>({setImage:e=>({commands:t})=>t.insertContent({type:"image",attrs:e})}),addNodeView:()=>({node:e,getPos:t,editor:i})=>{let l,n,r,o,a;let s=document.createElement("img");s.src=e.attrs.src,s.alt=e.attrs.alt||"",s.style.width=e.attrs.width||"auto",s.style.height=e.attrs.height||"auto",s.style.maxWidth="100%",s.style.cursor="pointer";let d=document.createElement("div");d.style.position="relative",d.style.display="inline-block",d.appendChild(s);let u=document.createElement("div");return u.style.position="absolute",u.style.right="0",u.style.bottom="0",u.style.width="12px",u.style.height="12px",u.style.background="#ddd",u.style.border="1px solid #999",u.style.cursor="nwse-resize",d.appendChild(u),u.addEventListener("mousedown",d=>{d.preventDefault(),l=d.clientX,d.clientY,n=s.offsetWidth,r=s.offsetHeight,o=n/r,a=t();let onMouseMove=t=>{let r=t.clientX-l,d=n+r,u=d/o;s.style.width=`${d}px`,s.style.height=`${u}px`,"number"==typeof a&&i.view.dispatch(i.view.state.tr.setNodeMarkup(a,void 0,{...e.attrs,width:`${d}px`,height:`${u}px`}))},onMouseUp=()=>{document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",onMouseUp)};document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)}),{dom:d}}});l()}catch(e){l(e)}})},2782:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{Y:()=>a});var n=i(2301),r=i(5234),o=e([n,r]);[n,r]=o.then?(await o)():o;let a=n.default.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:e.style||null})}}},renderHTML:({HTMLAttributes:e})=>["td",(0,r.mergeAttributes)(e),0]});l()}catch(e){l(e)}})},7436:(e,t,i)=>{i.a(e,async(e,l)=>{try{i.d(t,{x:()=>a});var n=i(202),r=i(5234),o=e([n,r]);[n,r]=o.then?(await o)():o;let a=n.default.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:e.style||null})}}},renderHTML:({HTMLAttributes:e})=>["th",(0,r.mergeAttributes)(e),0]});l()}catch(e){l(e)}})}};