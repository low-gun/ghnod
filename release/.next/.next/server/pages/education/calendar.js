"use strict";(()=>{var e={};e.id=9518,e.ids=[9518,2888,660],e.modules={8847:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>c,getServerSideProps:()=>h,getStaticPaths:()=>g,getStaticProps:()=>x,reportWebVitals:()=>S,routeModule:()=>D,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>Y,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>m});var s=r(7093),n=r(5244),o=r(1323),i=r(9209),l=r.n(i),d=r(7201),p=r(2554),u=e([d,p]);[d,p]=u.then?(await u)():u;let c=(0,o.l)(p,"default"),x=(0,o.l)(p,"getStaticProps"),g=(0,o.l)(p,"getStaticPaths"),h=(0,o.l)(p,"getServerSideProps"),f=(0,o.l)(p,"config"),S=(0,o.l)(p,"reportWebVitals"),m=(0,o.l)(p,"unstable_getStaticProps"),v=(0,o.l)(p,"unstable_getStaticPaths"),Y=(0,o.l)(p,"unstable_getStaticParams"),y=(0,o.l)(p,"unstable_getServerProps"),b=(0,o.l)(p,"unstable_getServerSideProps"),D=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/education/calendar",pathname:"/education/calendar",bundlePath:"",filename:""},components:{App:d.default,Document:l()},userland:p});a()}catch(e){a(e)}})},2245:e=>{e.exports=require("moment")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},9890:e=>{e.exports=import("zustand")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")},2554:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>CalendarPage,getServerSideProps:()=>getServerSideProps});var s=r(997),n=r(6689),o=r(1163),i=r(2245),l=r(1201),d=r(9648),p=r(4451),u=e([l,d]);function formatYYYYMMDD(e){if(!(e instanceof Date))return"";let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}function parseYYYYMMDD(e){if(!e)return null;let[t,r,a]=e.split("-");return new Date(Number(t),Number(r)-1,Number(a))}async function getServerSideProps(e){try{let t=e.req.headers.cookie||"",r=process.env.API_BASE_URL||"http://localhost:5001/api";console.log("\uD83D\uDC49 baseURL:",r);let a=i(),s=a.clone().startOf("month").format("YYYY-MM-DD"),n=a.clone().endOf("month").add(1,"month").format("YYYY-MM-DD"),o=await d.default.get(`${r}/education/schedules/public?type=전체&start_date=${s}&end_date=${n}`,{headers:{Cookie:t}}),l=o.data;if(!l?.schedules)return{props:{eventsData:[]}};return{props:{eventsData:l.schedules.map(e=>({id:e.id,title:e.title,start_date:e.start_date,end_date:e.end_date,location:e.location,instructor:e.instructor,total_spots:e.total_spots,type:e.type||e.category||null}))}}}catch(e){return console.error("SSR education/calendar error:",e),{props:{eventsData:[]}}}}function CalendarPage({eventsData:e}){let[t,r]=(0,n.useState)(()=>e.map(e=>({id:e.id,title:e.title,start:new Date(e.start_date),end:new Date(e.end_date),location:e.location,instructor:e.instructor,description:e.description,total_spots:e.total_spots,type:e.type||e.category||null}))),[a,d]=(0,n.useState)("전체"),[u,c]=(0,n.useState)(""),[x,g]=(0,n.useState)(new Date),[h,f]=(0,n.useState)(new Date(2025,11,31)),[S,m]=(0,n.useState)(i()),v=(0,o.useRouter)(),Y=(0,n.useMemo)(()=>{let e=v.query.id;return t.find(t=>String(t.id)===String(e))},[v.query.id,t]);(0,n.useEffect)(()=>{"교육기간"===a&&m(x)},[a,x]);let y=t.filter(e=>{let t=u.toLowerCase();if("전체"===a){if(t&&!(e.title?.toLowerCase().includes(t)||e.location?.toLowerCase().includes(t)||e.instructor?.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)))return!1}else if("교육명"===a&&t&&!e.title?.toLowerCase().includes(t))return!1;else if("교육기간"===a){let t=e.start,r=e.end;if(r<x||t>h)return!1}return!0});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{textAlign:"center",margin:"8px 0 16px",fontSize:"20px",fontWeight:"bold"},children:[s.jsx("span",{style:{marginRight:"20px",cursor:"pointer",fontSize:"24px"},onClick:()=>m(S.clone().subtract(1,"month")),children:"◀"}),S.format("YYYY년 M월"),s.jsx("span",{style:{marginLeft:"20px",cursor:"pointer",fontSize:"24px"},onClick:()=>m(S.clone().add(1,"month")),children:"▶"})]}),s.jsx("div",{style:{margin:"0 20px 10px",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f9f9f9"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[(0,s.jsxs)("select",{value:a,onChange:e=>{d(e.target.value),c(""),g(new Date),f(new Date(2025,11,31))},style:{padding:"4px 8px",border:"none",backgroundColor:"transparent",fontSize:"14px"},children:[s.jsx("option",{value:"전체",children:"전체"}),s.jsx("option",{value:"교육명",children:"교육명"}),s.jsx("option",{value:"교육기간",children:"교육기간"})]}),("전체"===a||"교육명"===a)&&s.jsx("input",{type:"text",placeholder:"검색어를 입력하세요",value:u,onChange:e=>c(e.target.value),style:{width:"50%",padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"}}),"교육기간"===a&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",width:"50%"},children:[s.jsx("input",{type:"date",value:formatYYYYMMDD(x),onChange:e=>g(parseYYYYMMDD(e.target.value)),style:{flex:1,padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"}}),s.jsx("span",{children:"~"}),s.jsx("input",{type:"date",value:formatYYYYMMDD(h),onChange:e=>f(parseYYYYMMDD(e.target.value)),style:{flex:1,padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"}})]})]})}),s.jsx("div",{style:{display:"flex",gap:"20px",padding:"20px"},children:s.jsx("div",{style:{flex:1,fontSize:"14px"},children:s.jsx(l.Z,{schedules:y,currentMonth:S,setCurrentMonth:m,onSelectSchedule:e=>{if(console.log("\uD83E\uDDEA 클릭된 일정:",e),!e?.type){alert("교육 타입 정보가 없습니다.");return}v.push(`/education/${e.type}/${e.id}`)},shouldFilterInactive:!1})})}),s.jsx(p.Z,{schedule:Y,onClose:()=>v.push(v.pathname,void 0,{shallow:!0}),mode:"user"})]})}[l,d]=u.then?(await u)():u,a()}catch(e){a(e)}})}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[2761,266,9209,8450,7201,1201],()=>__webpack_exec__(8847));module.exports=r})();