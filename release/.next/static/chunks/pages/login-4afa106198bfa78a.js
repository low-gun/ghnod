(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{1373:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var n=r(7294);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),toPascalCase=e=>{let t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),hasA11yProp=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...c},d)=>(0,n.createElement)("svg",{ref:d,...o,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:mergeClasses("lucide",a),...!i&&!hasA11yProp(c)&&{"aria-hidden":"true"},...c},[...l.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(i)?i:[i]])),createLucideIcon=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...o},a)=>(0,n.createElement)(s,{ref:a,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,r),...o}));return r.displayName=toPascalCase(e),r}},8814:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(1373);let o=(0,n.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(1556)}])},3803:function(e,t,r){"use strict";r.d(t,{Z:function(){return ChangePasswordModal}});var n=r(5893),o=r(7294),s=r(3504),a=r(1163),i=r(7771);function ChangePasswordModal(e){let{onClose:t,userId:r,isForcedReset:x=!1}=e,m=(0,a.useRouter)(),[y,b]=(0,o.useState)(""),[v,w]=(0,o.useState)(""),[j,C]=(0,o.useState)(""),[k,S]=(0,o.useState)(""),[P,O]=(0,o.useState)(!1),[_,E]=(0,o.useState)(!1),[z,I]=(0,o.useState)(!1),handleChangePassword=async()=>{if(!v||!j||!x&&!y){S("모든 항목을 입력해주세요.");return}if(v!==j){S("새 비밀번호가 일치하지 않습니다.");return}try{let e=x?{newPassword:v,userId:r}:{currentPassword:y,newPassword:v};await s.ZP.post("/mypage/change-password",e),alert("비밀번호가 변경되었습니다. 다시 로그인해주세요."),t(),m.replace("/login")}catch(t){var e,n;console.error("❌ 비밀번호 변경 실패:",t),S((null===(n=t.response)||void 0===n?void 0:null===(e=n.data)||void 0===e?void 0:e.message)||"비밀번호 변경 중 오류가 발생했습니다.")}},renderPasswordInput=(e,t,r,o,s)=>(0,n.jsxs)("div",{style:d,children:[(0,n.jsx)("label",{children:e}),(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("input",{type:o?"text":"password",value:t,onChange:e=>r(e.target.value),style:{...u,paddingRight:"36px"}}),(0,n.jsx)("span",{onClick:()=>s(!o),style:p,children:o?(0,n.jsx)(i.p3W,{}):(0,n.jsx)(i.w8I,{})})]})]});return(0,n.jsx)("div",{style:l,children:(0,n.jsxs)("div",{style:c,children:[(0,n.jsx)("h3",{style:{marginBottom:"16px"},children:x?"비밀번호 재설정":"비밀번호 변경"}),!x&&renderPasswordInput("현재 비밀번호",y,b,P,O),renderPasswordInput("새 비밀번호",v,w,_,E),renderPasswordInput("새 비밀번호 확인",j,C,z,I),k&&(0,n.jsx)("p",{style:h,children:k}),(0,n.jsxs)("div",{style:{marginTop:"20px",textAlign:"right"},children:[(0,n.jsx)("button",{onClick:handleChangePassword,style:f,children:"변경하기"}),(0,n.jsx)("button",{onClick:t,style:g,children:"취소"})]})]})})}let l={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},c={backgroundColor:"#fff",padding:"24px",borderRadius:"8px",width:"360px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},d={marginBottom:"12px",display:"flex",flexDirection:"column",gap:"6px"},u={padding:"8px",fontSize:"0.95rem",border:"1px solid #ccc",borderRadius:"4px",width:"100%"},p={position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",cursor:"pointer",fontSize:"18px",color:"#888"},h={color:"red",fontSize:"0.85rem",marginTop:"6px"},f={padding:"8px 16px",marginRight:"8px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},g={...f,backgroundColor:"#ccc",color:"#333"}},1556:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return LoginPage}});var n=r(5893),o=r(7294),s=r(1163),a=r(4027),i=r(4476),l=r(3504),c=r(3803),d=r(6792),u=r(8065),p=r(8814);r(7967);var components_SocialLoginButtons=()=>{let handleLogin=e=>{let t="localhost"===window.location.hostname;window.location.href="".concat(t?"http://localhost:5001":"https://ghnod-hvf7h4dhdpahh7h5.koreacentral-01.azurewebsites.net","/api/auth/").concat(e)};return(0,n.jsx)("div",{style:h,children:(0,n.jsxs)("div",{style:f,children:[(0,n.jsx)("button",{style:x,onClick:()=>handleLogin("google"),children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 533.5 544.3",style:y,children:[(0,n.jsx)("path",{fill:"#4285F4",d:"M533.5 278.4c0-17.4-1.4-34.1-4.1-50.4H272v95.3h146.9c-6.3 33.7-25.1 62.3-53.5 81.5v67h86.4c50.6-46.6 81.7-115.3 81.7-193.4z"}),(0,n.jsx)("path",{fill:"#34A853",d:"M272 544.3c72.6 0 133.6-24.1 178.1-65.4l-86.4-67c-24 16.1-54.7 25.6-91.7 25.6-70.5 0-130.3-47.6-151.7-111.5h-89.3v69.9c44.8 88.3 136.2 148.4 240.9 148.4z"}),(0,n.jsx)("path",{fill:"#FBBC05",d:"M120.3 326c-10.4-30.7-10.4-63.8 0-94.5v-69.9h-89.3c-39.1 76.8-39.1 167.5 0 244.3l89.3-69.9z"}),(0,n.jsx)("path",{fill:"#EA4335",d:"M272 107.7c38.9-.6 76.3 13.6 105.1 39.8l78.4-78.4C405.6 24.1 344.6 0 272 0 167.3 0 75.9 60.1 31.1 148.4l89.3 69.9c21.4-63.9 81.2-111.5 151.7-111.5z"})]})}),(0,n.jsx)("button",{style:m,onClick:()=>handleLogin("kakao"),children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:y,children:(0,n.jsx)("path",{fill:"#3C1E1E",d:"M12 0C5.4 0 0 4.8 0 10.7c0 3.4 2 6.4 5.1 8.3-.2.8-1.3 4.8-1.4 5.2 0 0-.1.3.1.4.2.1.4 0 .4 0 .5-.1 5.2-3.4 6-3.9.6.1 1.3.1 1.9.1 6.6 0 12-4.8 12-10.7S18.6 0 12 0z"})})})]})})};let h={display:"flex",justifyContent:"center",marginTop:"20px"},f={display:"flex",gap:"10px"},g={width:"40px",height:"40px",borderRadius:"50%",border:"none",padding:"5px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.1)"},x={...g,backgroundColor:"white"},m={...g,backgroundColor:"#FEE500"},y={width:"60%",height:"60%"};function LoginPage(){let[e,t]=(0,o.useState)(""),[r,h]=(0,o.useState)(""),[f,g]=(0,o.useState)(!1),[x,m]=(0,o.useState)(null),y=(0,s.useRouter)(),{login:b}=(0,o.useContext)(a.St),{setCartItems:v,setCartReady:w}=(0,i.iQ)(),handleLogin=async t=>{var n,o,s;t.preventDefault();try{let t=await l.ZP.post("/auth/login",{email:e,password:r,clientSessionId:(0,d.O)()}),o=t.data;if(o.success){if(console.log("✅ 로그인 성공 - accessToken:",o.accessToken),u.Am.success("로그인 성공! 환영합니다 \uD83D\uDE0A"),null===(n=o.user)||void 0===n?void 0:n.needsPasswordReset){m(o.user.id),g(!0);return}let e={id:o.user.id,email:o.user.email,name:o.user.username,role:o.user.role};(0,l.M8)(o.accessToken);let t=[];try{let e=await l.ZP.get("/cart/items");e.data.success&&(t=e.data.items)}catch(e){console.warn("\uD83D\uDED2 로그인 직후 장바구니 fetch 실패:",e.message)}b(e,o.accessToken,t),v(t),w(!0),localStorage.removeItem("guest_token"),delete l.ZP.defaults.headers.common["x-guest-token"],y.replace("admin"===o.user.role?"/admin":"/")}else u.Am.error("로그인 실패: "+o.message)}catch(t){console.error("로그인 중 오류:",t);let e=(null===(s=t.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)||"로그인 요청 실패";u.Am.error(e)}},j={width:"100%",padding:"12px",marginBottom:"15px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"15px"};return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"77vh",background:"#fff",margin:0},children:[(0,n.jsxs)("div",{style:{width:"360px",padding:"40px",borderRadius:"8px",background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginBottom:"20px"},children:[(0,n.jsx)("button",{type:"button",onClick:()=>y.back(),style:{position:"absolute",left:0,background:"none",border:"none",padding:0,cursor:"pointer",color:"#666",fontWeight:"bold"},"aria-label":"이전 페이지로",children:(0,n.jsx)(p.Z,{size:20})}),(0,n.jsx)("h1",{style:{fontSize:"24px",margin:0},children:"로그인"})]}),(0,n.jsxs)("form",{onSubmit:handleLogin,autoComplete:"off",style:{textAlign:"left"},children:[(0,n.jsx)("input",{type:"text",name:"fake_email",autoComplete:"username",style:{display:"none"}}),(0,n.jsx)("input",{type:"password",name:"fake_password",autoComplete:"current-password",style:{display:"none"}}),(0,n.jsx)("input",{type:"email",name:"nope_email",placeholder:"이메일",value:e,onChange:e=>t(e.target.value),required:!0,style:j}),(0,n.jsx)("input",{type:"password",name:"nope_password",autoComplete:"current-password",placeholder:"비밀번호",value:r,onChange:e=>h(e.target.value),required:!0,style:j}),(0,n.jsx)("button",{type:"submit",style:{width:"100%",padding:"12px",border:"none",borderRadius:"4px",backgroundColor:"#0070f3",color:"#fff",fontSize:"15px",fontWeight:"bold",cursor:"pointer"},children:"로그인"}),(0,n.jsxs)("p",{style:{marginTop:"10px",fontSize:"14px",textAlign:"left"},children:["아직 회원이 아니신가요?"," ",(0,n.jsx)("a",{href:"/register",style:{color:"#0070f3",textDecoration:"underline"},children:"회원가입"})]}),(0,n.jsxs)("div",{style:{marginTop:"20px"},children:[(0,n.jsx)("div",{style:{textAlign:"center",fontSize:"14px",marginBottom:"10px"},children:"소셜 계정으로 로그인"}),(0,n.jsx)(components_SocialLoginButtons,{})]})]})]}),f&&(0,n.jsx)(c.Z,{userId:x,onClose:()=>g(!1),isForcedReset:!0})]})}},5054:function(e,t,r){"use strict";r.d(t,{w_:function(){return GenIcon}});var n=r(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(o),a=["attr","size","title"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GenIcon(e){return t=>n.createElement(IconBase,_extends({attr:_objectSpread({},e.attr)},t),function Tree2Element(e){return e&&e.map((e,t)=>n.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}(e.child))}function IconBase(e){var elem=t=>{var r,{attr:o,size:s,title:i}=e,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,a),c=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,l,{className:r,style:_objectSpread(_objectSpread({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>elem(e)):elem(o)}}},function(e){e.O(0,[594,9774,2888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);