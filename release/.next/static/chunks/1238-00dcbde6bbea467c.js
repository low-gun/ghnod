"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1238],{5427:function(e,t,n){n.d(t,{Z:function(){return CartItemCard}});var i=n(5893),o=n(7104),r=n(1163);function CartItemCard(e){let{item:t,selected:n,onCheck:d,onDelete:c,onQuantityChange:a,disableActions:p=!1}=e,x=(0,r.useRouter)(),{id:u,schedule_id:h,schedule_title:f,start_date:g,end_date:b,image_url:y,unit_price:j,discount_price:m,quantity:C,subtotal:S}=t,v=new Date(g),k=new Date(b),D=v.getFullYear()===k.getFullYear()&&v.getMonth()===k.getMonth()&&v.getDate()===k.getDate();return(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"12px",padding:"16px",background:"#fff",display:"flex",flexDirection:"row",gap:"16px",position:"relative",height:"100%",boxSizing:"border-box",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[!p&&(0,i.jsx)("button",{onClick:()=>c(u),style:{position:"absolute",top:6,right:6,background:"transparent",border:"none",fontSize:"20px",color:"#aaa",cursor:"pointer"},title:"삭제",children:"\xd7"}),!p&&(0,i.jsx)("input",{type:"checkbox",checked:n,onChange:e=>d(u,e.target.checked),style:{position:"absolute",top:12,left:12}}),(0,i.jsx)("div",{onClick:()=>x.push("/education/facilitation/".concat(h)),style:{width:80,height:80,flexShrink:0,borderRadius:4,overflow:"hidden",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:y?(0,i.jsx)("img",{src:y,alt:f,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,i.jsx)("span",{style:{color:"#999",fontSize:12},children:"썸네일 없음"})}),(0,i.jsxs)("div",{style:{flex:1,paddingTop:4},children:[(0,i.jsx)("h3",{style:{fontSize:"15px",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f}),(0,i.jsxs)("p",{style:{fontSize:"13px",color:"#666",marginBottom:"8px"},children:[v.toLocaleDateString(),!D&&" ~ ".concat(k.toLocaleDateString())]}),p?(0,i.jsxs)("div",{style:{fontSize:14,marginTop:4},children:["수량: ",C]}):(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",gap:6},children:(0,i.jsxs)("div",{style:{display:"inline-flex",border:"1px solid #ccc",borderRadius:4,overflow:"hidden",alignItems:"center"},children:[(0,i.jsx)("button",{onClick:()=>a(t,-1),style:l,children:"–"}),(0,i.jsx)("div",{style:s,children:C}),(0,i.jsx)("button",{onClick:()=>a(t,1),style:l,children:"+"})]})}),(0,i.jsx)("div",{style:{marginTop:8,fontSize:"15px"},children:m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{style:{textDecoration:"line-through",color:"#999",marginRight:8},children:[(0,o.T)(j),"원"]}),(0,i.jsxs)("span",{style:{color:"#d9534f",fontWeight:"bold"},children:[(0,o.T)(m),"원"]}),(0,i.jsxs)("span",{style:{fontSize:"11px",marginLeft:6,color:"#d9534f",fontWeight:"bold"},children:["(",Math.round((1-m/j)*100),"% 할인)"]}),(0,i.jsxs)("div",{style:{textAlign:"right",fontWeight:"bold",marginTop:4},children:[(0,o.T)(S),"원"]})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{textAlign:"right",fontWeight:"bold"},children:[(0,o.T)(S),"원"]})})})]})]})}let l={width:32,height:32,border:"1px solid #ddd",background:"#f5f5f5",fontWeight:"bold",fontSize:16,cursor:"pointer",borderRadius:"4px"},s={width:36,height:28,lineHeight:"28px",textAlign:"center",fontSize:14,background:"#fff"}},8097:function(e,t,n){n.d(t,{Z:function(){return CartSummary}});var i=n(5893),o=n(7294),r=n(7104);function CouponSelector(e){let{couponList:t=[],onSelect:n,onClose:o}=e;return console.log("\uD83D\uDD25 CouponSelector 렌더됨:",t),(0,i.jsx)("div",{style:l,children:(0,i.jsxs)("div",{style:{...s,width:320},children:[(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)("strong",{children:"쿠폰 선택"}),(0,i.jsx)("button",{onClick:o,style:c,children:"\xd7"})]}),(0,i.jsxs)("ul",{style:{padding:0,listStyle:"none",marginTop:12},children:[(0,i.jsx)("li",{tabIndex:0,role:"button",onClick:()=>{console.log("\uD83D\uDD25 쿠폰 선택: 없음"),n(null),o()},style:a,children:"선택 안 함"},0),t.map(e=>(0,i.jsxs)("li",{tabIndex:0,role:"button",onClick:()=>{let i=t.find(t=>t.id===e.id);console.log("\uD83D\uDD25 쿠폰 클릭됨:",i),i||console.warn("❗ 쿠폰 매칭 실패, 원본:",e),n(i),o()},style:a,children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:e.label||e.name||"쿠폰 #".concat(e.id)}),(0,i.jsx)("span",{style:{color:"#3b82f6",fontWeight:"bold",fontSize:"13px"},children:(0,r.T)(e.amount||0)})]}),e.expiry_date&&(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:4},children:["유효기한: ",new Date(e.expiry_date).toLocaleDateString()]})]},e.id))]})]})})}let l={position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},s={background:"#fff",padding:20,borderRadius:8,width:280,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},d={display:"flex",justifyContent:"space-between",alignItems:"center"},c={fontSize:18,border:"none",background:"transparent",cursor:"pointer"},a={padding:"10px 12px",borderBottom:"1px solid #eee",cursor:"pointer",fontSize:"14px"};function PointInputModal(e){let{onApply:t,onClose:n,maxPoint:r=0,defaultValue:l=0}=e,[s,d]=(0,o.useState)(l);return(0,o.useEffect)(()=>{d(l)},[l]),(0,i.jsx)("div",{style:p,children:(0,i.jsxs)("div",{style:x,children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("strong",{children:"포인트 사용"}),(0,i.jsx)("button",{onClick:n,style:h,children:"\xd7"})]}),(0,i.jsxs)("div",{style:{marginTop:16},children:[(0,i.jsx)("input",{type:"number",min:0,max:r,value:s,onChange:e=>d(e.target.value),placeholder:"0",style:f}),(0,i.jsxs)("div",{style:b,children:[(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#999"},children:["사용 가능 포인트: ",r.toLocaleString(),"P"]}),(0,i.jsx)("button",{onClick:()=>{d(r)},style:{fontSize:"12px",border:"none",background:"transparent",color:"#3b82f6",cursor:"pointer"},children:"전액사용"})]})]}),(0,i.jsx)("button",{onClick:()=>{let e=Math.min(Number(s),r);t(e),n()},style:g,children:"적용"})]})})}let p={position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},x={background:"#fff",padding:20,borderRadius:8,width:280,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},u={display:"flex",justifyContent:"space-between",alignItems:"center"},h={fontSize:18,border:"none",background:"transparent",cursor:"pointer"},f={padding:10,width:"100%",fontSize:"14px",border:"1px solid #ccc",borderRadius:4},g={marginTop:16,padding:"10px 0",width:"100%",fontWeight:"bold",fontSize:"14px",backgroundColor:"#3b82f6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},b={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:6};function CartSummary(e){let{items:t=[],couponDiscount:n=0,pointUsed:l=0,onCheckout:s,onCouponChange:d,onPointChange:c,maxPoint:a=0,couponList:p=[],isLoading:x=!1}=e;console.log("\uD83D\uDCE6 CartSummary → items 확인:",t);let[u,h]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),b=t.reduce((e,t)=>(console.log("\uD83D\uDD22 item.quantity:",t.quantity),e+t.quantity),0),C=t.reduce((e,t)=>e+t.unit_price*t.quantity,0),S=t.reduce((e,t)=>{let n=null!==t.discount_price&&void 0!==t.discount_price&&t.discount_price>0&&t.discount_price<t.unit_price,i=n?(t.unit_price-t.discount_price)*t.quantity:0;return e+i},0),v=0===b||"number"!=typeof n?0:n,k=0===b?0:l,D=isNaN(v)?0:v;console.log("\uD83D\uDCB8 전달받은 couponDiscount:",n),console.log("\uD83D\uDCB8 safeCoupon 계산 결과:",D);let w=Math.max(0,C-S-v-k);return(0,i.jsxs)("div",{style:{background:"#f9f9f9",border:"1px solid #ddd",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",height:"fit-content"},children:[(0,i.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:12},children:"주문정보"}),(0,i.jsxs)("div",{style:y,children:[(0,i.jsx)("span",{style:j,children:"수량:"}),(0,i.jsxs)("span",{children:[b,"개"]})]}),(0,i.jsxs)("div",{style:y,children:[(0,i.jsx)("span",{style:j,children:"금액:"}),(0,i.jsxs)("span",{children:[(0,r.T)(C),"원"]})]}),p&&p.length>0&&(0,i.jsxs)("div",{style:{...y,color:"#d9534f"},children:[(0,i.jsx)("span",{style:j,children:"쿠폰:"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:b>0&&D>0?"− ".concat((0,r.T)(D),"원"):"선택된 항목 없음"}),(0,i.jsx)("button",{onClick:()=>h(!0),style:m,disabled:0===b,children:"사용"})]})]}),!isNaN(a)&&Number(a)>0&&(0,i.jsxs)("div",{style:{...y,color:"#d9534f"},children:[(0,i.jsx)("span",{style:j,children:"포인트:"}),(0,i.jsxs)("span",{children:[b>0&&k>0?"− ".concat((0,r.T)(k),"원"):"선택된 항목 없음",(0,i.jsx)("button",{onClick:()=>g(!0),style:m,disabled:0===b,children:"사용"})]})]}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",marginTop:8,borderTop:"1px dashed #ccc",paddingTop:8,display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:"결제 금액"}),(0,i.jsxs)("span",{children:[(0,r.T)(w),"원"]})]}),(0,i.jsx)("button",{onClick:s,disabled:0===b||x,style:{marginTop:"16px",width:"100%",padding:"10px 0",fontWeight:"bold",backgroundColor:0===b||x?"#ccc":"#3b82f6",color:"#fff",border:"none",borderRadius:"6px",cursor:0===b||x?"not-allowed":"pointer",fontSize:"15px",opacity:x?.6:1},children:x?"처리 중...":"주문하기"}),u&&(0,i.jsx)(CouponSelector,{couponList:p,onSelect:e=>{d(e)},onClose:()=>h(!1)}),f&&(0,i.jsx)(PointInputModal,{maxPoint:a,defaultValue:l,onApply:e=>c(e),onClose:()=>g(!1)})]})}let y={fontSize:"14px",marginBottom:4,display:"flex",justifyContent:"space-between",alignItems:"center"},j={minWidth:"90px",fontWeight:"normal"},m={fontSize:"12px",marginLeft:8,padding:"2px 6px",borderRadius:"4px",border:"1px solid #ccc",background:"#fff",cursor:"pointer"}}}]);