"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2206],{489:function(e,t,n){n.d(t,{Z:function(){return TiptapEditor}});var l=n(5893),i=n(7294),o=n(1284),r=n(9940),s=n(5915),a=n(2773),d=n(3991),c=n(658),u=n(5865);let p=c.Z.extend({addAttributes(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:e.style||null})}}},renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,u.P1)(t),0]}});var h=n(3626);let f=h.Z.extend({addAttributes(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:e.style||null})}}},renderHTML(e){let{HTMLAttributes:t}=e;return["th",(0,u.P1)(t),0]}});var x=n(9734),g=n(8510),m=n(6279),y=n(3621),b=n(353);let v=u.vc.create({name:"fontSize",addAttributes:()=>({size:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.size?{style:"font-size: ".concat(e.size)}:{}}}),parseHTML:()=>[{tag:"span",style:"font-size"}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,u.P1)(t),0]},addCommands(){return{setFontSize:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{size:e})}}}}),j=u.vc.create({name:"fontFamily",addAttributes:()=>({family:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.family?{style:"font-family: ".concat(e.family)}:{}}}),parseHTML:()=>[{tag:"span",style:"font-family"}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,u.P1)(t),0]},addCommands(){return{setFontFamily:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{family:e})}}}}),k=u.NB.create({name:"image",inline:!1,group:"block",draggable:!0,addAttributes:()=>({src:{},alt:{default:null},width:{default:"auto"},height:{default:"auto"}}),parseHTML:()=>[{tag:"img[src]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,u.P1)(t)]},addCommands:()=>({setImage:e=>t=>{let{commands:n}=t;return n.insertContent({type:"image",attrs:e})}}),addNodeView:()=>e=>{let t,n,l,i,{node:o,getPos:r,editor:s}=e,a=document.createElement("img");a.src=o.attrs.src,a.alt=o.attrs.alt||"",a.style.width=o.attrs.width||"auto",a.style.height=o.attrs.height||"auto",a.style.maxWidth="100%",a.style.cursor="pointer";let d=document.createElement("div");d.style.position="relative",d.style.display="inline-block",d.appendChild(a);let c=document.createElement("div");return c.style.position="absolute",c.style.right="0",c.style.bottom="0",c.style.width="12px",c.style.height="12px",c.style.background="#ddd",c.style.border="1px solid #999",c.style.cursor="nwse-resize",d.appendChild(c),c.addEventListener("mousedown",e=>{e.preventDefault(),t=e.clientX,e.clientY,l=(n=a.offsetWidth)/a.offsetHeight,i=r();let onMouseMove=e=>{let r=e.clientX-t,d=n+r,c=d/l;a.style.width="".concat(d,"px"),a.style.height="".concat(c,"px"),"number"==typeof i&&s.view.dispatch(s.view.state.tr.setNodeMarkup(i,void 0,{...o.attrs,width:"".concat(d,"px"),height:"".concat(c,"px")}))},onMouseUp=()=>{document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",onMouseUp)};document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)}),{dom:d}}});var C=n(93);function ToolbarButtons(e){let{editor:t,fileInputRef:n,fontSizes:o=["12px","14px","16px","18px","20px","24px"]}=e,[r,s]=(0,i.useState)("#000000"),[a,d]=(0,i.useState)("1px"),[c,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(null),[f,x]=(0,i.useState)(!1),[g,m]=(0,i.useState)(0),[y,b]=(0,i.useState)(0),[v,j]=(0,i.useState)("#ffffff"),k={padding:"6px 10px",fontSize:"13px",border:"1px solid #ccc",borderRadius:4,backgroundColor:"#f4f4f4",cursor:"pointer"};return(0,i.useEffect)(()=>{let checkTableSelection=()=>{let e=null==t?void 0:t.state.selection;if(e instanceof C.Xc){var n;let l=null===(n=t.view.domAtPos(e.$anchorCell.pos))||void 0===n?void 0:n.node;if(l instanceof HTMLElement){let e=l.getBoundingClientRect();h({top:e.top+window.scrollY-40,left:e.left+window.scrollX}),u(!0)}}else u(!1)};checkTableSelection();let e=setInterval(checkTableSelection,300);return()=>clearInterval(e)},[t]),setTimeout(()=>{},100),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginRight:"auto"},children:[(0,l.jsx)("button",{onClick:()=>t.chain().focus().toggleBold().run(),style:k,children:(0,l.jsx)("b",{children:"B"})}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().toggleItalic().run(),style:k,children:(0,l.jsx)("i",{children:"I"})}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().toggleUnderline().run(),style:k,children:(0,l.jsx)("u",{children:"U"})}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),style:k,children:"리스트"}),(0,l.jsx)("button",{onClick:()=>{let e=t.getAttributes("link").href,n=window.prompt("링크 URL을 입력하세요:",e);if(null!==n){if(""===n)t.chain().focus().unsetLink().run();else{if(t.state.selection.empty){alert("링크를 적용할 텍스트를 먼저 선택하세요.");return}t.chain().focus().extendMarkRange("link").setLink({href:n}).run()}}},style:k,children:"\uD83D\uDD17 링크"}),(0,l.jsx)("button",{onClick:()=>{let e=window.prompt("이미지 URL을 입력하세요:");e&&t.chain().focus().setImage({src:e}).run()},style:k,children:"이미지 URL"}),(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("button",{onClick:()=>{x(e=>!e)},style:k,children:"▦ 테이블"}),f&&(0,l.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"1px solid #ccc",padding:8,marginTop:4,zIndex:100},children:[(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 20px)",gap:2},children:Array.from({length:100},(e,n)=>{let i=n%10+1,o=Math.floor(n/10)+1;return(0,l.jsx)("div",{onMouseEnter:()=>{m(i),b(o)},onClick:()=>{console.log("\uD83D\uDCE6 생성하려는 테이블 크기:",g,"x",y),t.chain().focus().insertTable({rows:y,cols:g,withHeaderRow:!1}).run(),x(!1)},style:{width:20,height:20,background:i<=g&&o<=y?"#0070f3":"#eee",cursor:"pointer"}},n)})}),(0,l.jsxs)("div",{style:{marginTop:6,fontSize:12},children:[g," x ",y]})]})]}),(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.click()},style:k,children:"\uD83D\uDCC1 파일"}),(0,l.jsx)("select",{onChange:e=>t.chain().focus().setFontSize(e.target.value).run(),defaultValue:"16px",style:k,children:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsxs)("select",{onChange:e=>t.chain().focus().setFontFamily(e.target.value).run(),defaultValue:"",style:k,children:[(0,l.jsx)("option",{value:"",children:"기본폰트"}),(0,l.jsx)("option",{value:"Arial",children:"Arial"}),(0,l.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,l.jsx)("option",{value:"Noto Sans KR",children:"Noto Sans KR"}),(0,l.jsx)("option",{value:"Courier New",children:"Courier New"})]}),(0,l.jsx)("input",{type:"color",onChange:e=>t.chain().focus().setColor(e.target.value).run(),title:"폰트 색상",style:{...k,padding:4,width:36}}),(0,l.jsxs)("select",{onChange:e=>{let n=e.target.value;t.chain().focus().setTextAlign(n).run()},defaultValue:"left",style:k,children:[(0,l.jsx)("option",{value:"left",children:"좌측정렬"}),(0,l.jsx)("option",{value:"center",children:"가운데정렬"}),(0,l.jsx)("option",{value:"right",children:"우측정렬"})]})]}),c&&p&&(0,l.jsxs)("div",{style:{position:"absolute",top:p.top,left:p.left,background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:4,display:"flex",gap:6,zIndex:100},children:[(0,l.jsxs)("select",{onChange:e=>d(e.target.value),defaultValue:a,style:k,children:[(0,l.jsx)("option",{value:"1px",children:"1px"}),(0,l.jsx)("option",{value:"2px",children:"2px"}),(0,l.jsx)("option",{value:"3px",children:"3px"})]}),(0,l.jsx)("input",{type:"color",value:r,onChange:e=>s(e.target.value),style:{width:36,height:30}}),(0,l.jsx)("button",{onClick:()=>{let{state:e,view:n}=t,l=e.tr,i=[];if(!(e.selection instanceof C.Xc)){alert("선택된 셀이 없습니다.");return}if(e.selection.forEachCell((e,t)=>{var l;let o=n.nodeDOM(t);if(!o||"TD"!==o.tagName&&"TH"!==o.tagName){console.warn("❌ 정확한 셀 DOM 못 찾음",t,o);return}let r=o.cellIndex,s=null===(l=o.parentElement)||void 0===l?void 0:l.rowIndex;"number"==typeof r&&"number"==typeof s&&i.push({node:e,pos:t,x:r,y:s})}),0===i.length){alert("적용할 셀이 없습니다.");return}let o=i.map(e=>e.x),s=i.map(e=>e.y),d=Math.min(...o),c=Math.max(...o),u=Math.min(...s),p=Math.max(...s);i.forEach(e=>{let{node:t,pos:n,x:i,y:o}=e,s=Object.fromEntries((t.attrs.style||"").split(";").map(e=>e.trim()).filter(Boolean).map(e=>e.split(":").map(e=>e.trim()))),h={...o===u&&{"border-top":"".concat(a," solid ").concat(r)},...o===p&&{"border-bottom":"".concat(a," solid ").concat(r)},...i===d&&{"border-left":"".concat(a," solid ").concat(r)},...i===c&&{"border-right":"".concat(a," solid ").concat(r)}},f={...s,...h},x=Object.entries(f).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join("; ");l.setNodeMarkup(n,void 0,{...t.attrs,style:x})}),n.dispatch(l)},style:k,children:"테두리 적용"}),(0,l.jsx)("input",{type:"color",value:v,onChange:e=>{let n=e.target.value;j(n),t.commands.setCellAttribute("backgroundColor",n)},title:"배경색",style:{width:32,height:28,cursor:"pointer"}}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().mergeCells().run(),style:k,children:"\uD83E\uDDE9 병합"}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().addRowAfter().run(),style:k,children:"➕ 행"}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().addColumnAfter().run(),style:k,children:"➕ 열"}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().deleteRow().run(),style:k,children:"➖ 행"}),(0,l.jsx)("button",{onClick:()=>t.chain().focus().deleteColumn().run(),style:k,children:"➖ 열"})]})]})}function EditorModeButtons(e){let{sourceMode:t,setSourceMode:n}=e;return(0,l.jsx)("div",{style:{display:"flex",gap:8},children:t?(0,l.jsx)("button",{onClick:()=>n(!1),style:w,children:"\uD83D\uDCDD 편집"}):(0,l.jsx)("button",{onClick:()=>n(!0),style:w,children:"\uD83E\uDDFE HTML"})})}let w={padding:"6px 10px",fontSize:"13px",border:"1px solid #ccc",borderRadius:4,backgroundColor:"#f4f4f4",cursor:"pointer"};var M=n(561),L=n(1575),T=n(4565);function TiptapEditor(e){let{value:t,onChange:n,height:c=280}=e,[u,h]=(0,i.useState)(!1),[C,w]=(0,i.useState)(!1),S=(0,i.useRef)(null);(0,i.useEffect)(()=>{w(!0)},[]);let D=(0,o.jE)({extensions:[r.Z.configure({blockquote:!1,bulletList:!1,orderedList:!1,listItem:!1}),s.ZP.configure({openOnClick:!1}),a.ZP.configure({resizable:!0,allowTableNodeSelection:!1}),d.Z,f,p,x.ZP,g.Z,y.Z,b.Z,m.Z.configure({types:["heading","paragraph"]}),v,j,k,M.ZP,L.ZP,T.Z],content:(null==t?void 0:t.trim())||"<p><br></p><p><br></p><p><br></p>",editorProps:{attributes:{class:"tiptap-editor"}},onUpdate:e=>{let{editor:t}=e;n(t.getHTML())},editable:C,immediatelyRender:!1});(0,i.useEffect)(()=>{D&&t!==D.getHTML()&&D.commands.setContent(t||"")},[t,D]);let insertImage=e=>{let t=new FileReader;t.onload=()=>{D.commands.insertContent('<img src="'.concat(t.result,'" alt="image" />')),n(D.getHTML())},t.readAsDataURL(e)};return C&&D?(0,l.jsxs)("div",{children:[(0,l.jsx)("style",{children:"\n          .tiptap-editor ul {\n            padding-left: 1.2rem;\n            list-style-type: disc;\n          }\n          .tiptap-editor *:first-child {\n            margin-top: 0;\n          }\n          .tiptap-editor img,\n          .preview-wrapper img {\n            max-width: 100%;\n            height: auto;\n            display: block;\n            margin: 0.5rem 0;\n          }\n          .tiptap-editor,\n          .preview-wrapper {\n            word-break: break-word;\n            min-height: 280px;\n          }\n          .tiptap-editor table {\n            border-collapse: separate;\n            border-spacing: 0;\n            table-layout: fixed;\n            width: auto;\n            max-width: 100%;\n            transition: outline 0.2s ease-in-out;\n          }\n          .tiptap-editor table:hover {\n            outline: 1px dashed #aaa;\n            outline-offset: 2px;\n          }\n          .tiptap-editor td,\n          .tiptap-editor th {\n            border: 1px solid #ccc;\n            box-sizing: border-box;\n            position: relative;\n            vertical-align: top;\n            min-height: 30px;\n          }\n          .tiptap-editor th {\n            font-weight: normal;\n          }\n          .tiptap-editor .selectedCell {\n            background-color: rgba(0, 112, 243, 0.1);\n          }\n\n          /* \uD83D\uDC49 가로 드래그 커서 영역 (우측 border 선 위에서만) */\n          .tiptap-editor td::after,\n          .tiptap-editor th::after {\n            content: '';\n            position: absolute;\n            right: -2px;\n            top: 0;\n            width: 4px;\n            height: 100%;\n            cursor: col-resize;\n            z-index: 10;\n          }\n\n          .tiptap-editor td:hover::after,\n          .tiptap-editor th:hover::after {\n            background-color: #eee;\n          }\n        "}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start",marginBottom:12},children:[!u&&(0,l.jsx)(ToolbarButtons,{editor:D,fileInputRef:S}),(0,l.jsx)(EditorModeButtons,{sourceMode:u,setSourceMode:h})]}),u?(0,l.jsx)("textarea",{value:t,onChange:e=>n(e.target.value),style:{width:"100%",minHeight:c,border:"1px solid #ddd",borderRadius:6,padding:12,fontFamily:"monospace"}}):(0,l.jsx)("div",{style:{position:"relative",border:"1px solid #ddd",borderRadius:6,padding:12,minHeight:c,height:"100%",background:"#fff"},children:(0,l.jsx)(o.kg,{editor:D,spellCheck:!1,style:{width:"100%",minHeight:"100%"}})}),(0,l.jsx)("input",{type:"file",accept:"image/*",ref:S,style:{display:"none"},onChange:e=>{let t=e.target.files[0];t&&D&&insertImage(t)}})]}):null}},9018:function(e,t,n){n.d(t,{Z:function(){return AdminLayout}});var l=n(5893),i=n(7294),o=n(1163),r=n(2091),s=n(6131);function AdminSidebar(){let e=(0,o.useRouter)(),[t,n]=(0,i.useState)(()=>"true"===localStorage.getItem("sidebar-collapsed")),a={color:"#fff",fontSize:"20px"};return(0,l.jsxs)("nav",{style:{position:"fixed",top:0,left:0,bottom:0,width:t?"60px":"150px",background:"#111827",padding:"10px",overflowY:"auto",display:"flex",flexDirection:"column",height:"100vh",zIndex:1e3},children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"20px"},children:(0,l.jsx)("button",{onClick:()=>{n(e=>(localStorage.setItem("sidebar-collapsed",!e),!e))},style:{background:"none",border:"none",cursor:"pointer",color:"#fff"},children:t?(0,l.jsx)(r.Dli,{}):(0,l.jsx)(r.bUI,{})})}),(0,l.jsxs)("ul",{style:{padding:0,listStyle:"none",flex:1},children:[(0,l.jsx)("li",{style:{marginBottom:"15px"},children:(0,l.jsxs)("button",{onClick:()=>e.push("/admin"),style:{display:"flex",alignItems:"center",width:"100%",background:"none",border:"none",cursor:"pointer",color:"#fff"},children:[(0,l.jsx)(r.xng,{style:a}),!t&&(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"홈"})]})}),(0,l.jsx)("li",{style:{marginBottom:"15px"},children:(0,l.jsxs)("button",{onClick:()=>e.push("/admin/products"),style:{display:"flex",alignItems:"center",width:"100%",background:"none",border:"none",cursor:"pointer",color:"#fff"},children:[(0,l.jsx)(r.AFA,{style:a}),!t&&(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"상품관리"})]})}),(0,l.jsx)("li",{style:{marginBottom:"15px"},children:(0,l.jsxs)("button",{onClick:()=>e.push("/admin/schedules"),style:{display:"flex",alignItems:"center",width:"100%",background:"none",border:"none",cursor:"pointer",color:"#fff"},children:[(0,l.jsx)(r.IiJ,{style:a}),!t&&(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"교육일정"})]})}),(0,l.jsx)("li",{style:{marginBottom:"15px"},children:(0,l.jsxs)("button",{onClick:()=>e.push("/admin/payments"),style:{display:"flex",alignItems:"center",width:"100%",background:"none",border:"none",cursor:"pointer",color:"#fff"},children:[(0,l.jsx)(r.ypE,{style:a}),!t&&(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"결제관리"})]})}),(0,l.jsx)("li",{style:{marginBottom:"15px"},children:(0,l.jsxs)("button",{onClick:()=>e.push("/admin/users"),style:{display:"flex",alignItems:"center",width:"100%",background:"none",border:"none",cursor:"pointer",color:"#fff"},children:[(0,l.jsx)(r.Xws,{style:a}),!t&&(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"사용자"})]})}),(0,l.jsx)("li",{style:{marginTop:"auto",paddingTop:"20px",borderTop:"1px solid #555"},children:(0,l.jsx)(s.Z,{collapsed:t})})]})]})}function AdminLayout(e){let{pageTitle:t,children:n}=e;return(0,l.jsxs)("div",{className:"admin-layout",style:{display:"flex",minHeight:"100vh"},children:[(0,l.jsx)(AdminSidebar,{}),(0,l.jsx)("main",{className:"admin-main",style:{flex:1,marginLeft:"150px",overflowY:"auto",backgroundColor:"inherit",height:"100vh"},children:(0,l.jsxs)("div",{style:{padding:"20px"},children:[t&&(0,l.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginTop:"0px",marginBottom:"20px"},children:t}),n]})})]})}}}]);